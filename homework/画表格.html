<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="widtd=device-widtd, initial-scale=1.0">
  <title>Document</title>
  <script>
    /*
    生成HTML画表格的代码
    画表格需要
    1.外层的标签,包括table
    2.列组标签，其内要根据数组元素个数生成列，列标签内还要有css样式
    3.行标签，个数为数组元素的个数+1，多一个行为属性名的行且在第一行。
    4.单元格。每行的第一个单元格应为idx，后续要和属性名列的值对应。
    5.比较杂碎的奇数偶数行的底色
    6.最终要拼成一个大字符串输出

    抽象到代码层面需要：
    1.获取数组的元素个数，表格的行数应该为元素个数加一
    2.获取列数，列数为数组元素中属性的最大数量加一
    3.
    */




   class drawTable{
     constructor(ary){
      var ref=ary.map(element=>{
        if(typeof(element)=='object'){
          return element
        }else{
          return {Value:element}
        }
      }) 
      this.data=ref
     }
     drawIt(){
       document.write(this.integration())
     }
     createTd(element){
       return '<td>'+(element==undefined?'':element)+'</td>'
     }
     createTrHead(){
      var str=''
      for(let key in this.getColHead){
        str+=this.createTd(key)
      }
      return '<tr style="border:1px solid gray;background-color:rgb(215,215,215);"><td>(index)</td>'+str+'</tr>'
     }
     get getColHead(){
       var obj={}
       this.data.forEach(element=>{
           for(let key in element){
             if(!(key in obj)){
               obj[key]=1
             }
           }
         
       })
       return obj
     }
     createTr(){
       var str=''
       var number=2
       this.data.forEach((element,idx)=>{
         if(number%2==0){
           str+='<tr style="background-color:rgb(242,247,253);">'+this.createTd(idx)
            number++
         }else{
          str+='<tr style="background-color:#FFF;">'+this.createTd(idx)
            number++
         }
            for(let key in this.getColHead){
              if(key in element){
                str+=this.createTd(element[key])
              }else{
                str+=this.createTd()
              }
            }
            str+='</tr>'  
       })
       return str
     }
     createColgroup(){
       var str='<col style="border:1px solid gray;">'
       for(let key in this.getColHead){
        str+='<col style="border:1px solid gray;">'
       }
       return '<colgroup>'+str+'</colgroup>'
     }
     integration(){
       var str='<table style="border-collapse: collapse;border:1px solid gray;width:80vw;table-layout: fixed;min-width:500px">'
        str+=this.createColgroup()
        str+=this.createTrHead()
        str+=this.createTr()
        str+='</table>'
        return str
     }
   }
  </script>
</head>
<body>
  <!-- <table style="border-collapse: collapse;border:1px solid gray;width:80vw;table-layout: fixed;">
    <colgroup>
      <col style="border:1px solid gray;">
      <col  style="border:1px solid gray;">
      <col style="border:1px solid gray;">
    </colgroup>
      <tr style="border:1px solid gray">
        <td>index</td>
        <td>a</td>
        <td>b</td>
        <td>c</td>
      </tr>
      <tr>
        <td>1</td>
        <td>asdf</td>
        <td>asdf</td>
        <td>asdf</td>
      </tr>
      <tr>
        <td>2</td>
        <td>asdf</td>
        <td>asdf</td>
        <td></td>
      </tr>
      <tr>
        <td>3</td>
        <td>asddfdfdff</td>
        <td>asdf</td>
        <td>asdf</td>
      </tr>
    </table> -->
</body>
</html>