{"version":3,"sources":["hooks.js","Login.js","Picture.js","Create.js","MyVotes.js","LoginPrompt.js","Main.js","ViewVote.js","Authentication.js","CreateVote.js","AntdRegister.js","App.js","index.js"],"names":["useInput","init","useState","value","setValue","onChange","useCallback","e","target","Login","username","password","captcha","src","setSrc","update","Date","now","submit","a","info","axios","post","res","console","log","code","alert","type","alt","onClick","Picture","props","className1","multiple","className2","className","Content","Layout","Create","gutter","span","justify","block","to","Panel","Collapse","MyVotes","history","useHistory","myvotes","setMyvotes","PanelHide","icon","FormOutlined","UnorderedListOutlined","voteid","ShareAltOutlined","DeleteOutlined","id","idx","delete","then","data","produce","draft","splice","useEffect","Source","CancelToken","source","get","push","result","cancel","offset","length","accordion","map","it","header","title","Text","Typography","CollectionCreateForm","visible","onCreate","onCancel","setInfo","Form","useForm","form","alertMess","setAlertMess","onOK","validateFields","values","resetFields","isLogin","loginUser","catch","okText","cancelText","onOk","footer","layout","name","initialValues","modifier","Item","label","rules","required","message","LoginPrompt","setVisible","Header","Main","style","color","size","path","exact","component","Title","ViewVote","useParams","vote","setVote","cancelToken","token","url","window","location","host","ws","WebSocket","onmessage","JSON","parse","close","optionId","options","checked","i","isVoted","action","level","extraInfo","strong","content","display","votedBys","ratio","percent","showInfo","strokeWidth","trailColor","strokeColor","isAnonymous","Authentication","isModalVisible","setIsModalVisible","showModal","CreateVote","useImmer","setOptions","deadline","moment","add","format","anonymous","check","setCheck","val","useBooleanChecked","search","useLocation","useMemo","bordered","placeholder","shape","danger","MinusOutlined","fontSize","deleteOption","editOption","PlusOutlined","formItemLayout","labelCol","xs","sm","wrapperCol","tailFormItemLayout","AntdRegister","mess","setMess","onFinish","agreement","confirm","Error","scrollToFirstError","whitespace","hasFeedback","Password","dependencies","getFieldValue","validator","_","Promise","reject","resolve","valuePropName","href","htmlType","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.aca7fcd3.chunk.js","sourcesContent":["import { useCallback,useState} from \"react\";\r\n\r\nexport function useInput(init=''){\r\n  let [value,setValue]=useState(init)\r\n  let onChange=useCallback(function(e){\r\n    setValue(e.target.value)\r\n  },[])\r\n  return{\r\n    value,\r\n    onChange,\r\n  }\r\n}\r\n\r\nexport function useBooleanChecked(init=false){\r\n  let [check,setCheck]=useState(init)\r\n  let onChange=useCallback(function(val){\r\n    setCheck(val)\r\n  })\r\n  return{\r\n    checked:check,\r\n    onChange,\r\n  }\r\n}\r\n","import { useInput } from \"./hooks\"\r\nimport axios from \"axios\"\r\nimport { useState } from \"react\"\r\n\r\nexport default function Login(){\r\n  let username=useInput()\r\n  let password=useInput()\r\n  let captcha=useInput()\r\n  let [src,setSrc]=useState('/account/captcha')\r\n  let update=function(){\r\n    setSrc('/account/captcha?date'+Date.now())\r\n  }\r\n  let submit=async function(){\r\n    let info={\r\n      username:username.value,\r\n      password:password.value,\r\n      captcha:captcha.value,\r\n    }\r\n    try{\r\n      let res=await axios.post('/account/login',info)\r\n      console.log(res)\r\n      if(res.code==-2){\r\n        alert('验证码错误，请重新输入')\r\n        update()\r\n      }\r\n    }catch(e){\r\n      throw e\r\n    }\r\n  }\r\n  return(\r\n    <div>\r\n      <input type='text' {...username}/>用户名\r\n      <br/>\r\n      <input type='password' {...password}/>密码\r\n      <br/>\r\n      <img src={src} alt=\"验证码加载失败\" onClick={update}/>\r\n      <input type=\"text\" {...captcha}/>验证码\r\n      <button onClick={submit}>登录</button>\r\n    </div>\r\n  )\r\n}","import './Picture.css'\r\nexport default function Picture(props){\r\n  let className1=props.multiple?'':'sinpicturein'\r\n  let className2=props.multiple?'multipicturein':''\r\n  return(\r\n    <div className='mypicture'>\r\n      <p className={'mypicturein'}/>\r\n      <p className={'mypicturein '+className2}/>\r\n      <p className={'mypicturein '+className1}/>\r\n      <p className={'mypicturein '+className2}/>\r\n    </div>  \r\n  )\r\n}","import {Link} from 'react-router-dom'\r\nimport { Col, Layout, Row,Button } from \"antd\";\r\nimport Picture from './Picture'\r\nconst { Content } = Layout;\r\nexport default function Create(){\r\n  return (\r\n    <Layout>\r\n      <Content>\r\n        <Row gutter={[16]}>\r\n          <Col span={12}>\r\n            <Row justify=\"center\">\r\n              <Picture multiple={false}/>\r\n            </Row>\r\n            <Button type=\"primary\" block=\"true\">\r\n              <Link to=\"/create\">单选投票</Link>\r\n            </Button>\r\n          </Col>\r\n          <Col span={12}>\r\n            <Row justify=\"center\">\r\n              <Picture multiple={true}/>\r\n            </Row>\r\n            <Button type=\"primary\" block=\"true\">\r\n              <Link to=\"/create?multiple=1\">多选投票</Link>\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n      </Content>\r\n    </Layout>\r\n  )\r\n}","import {Row,Col,Layout,Collapse,Button} from 'antd'\r\nimport axios from 'axios'\r\nimport { useEffect, useState } from 'react'\r\nimport { useHistory } from 'react-router'\r\nimport { FormOutlined,UnorderedListOutlined,ShareAltOutlined,DeleteOutlined } from '@ant-design/icons'\r\nimport { Link } from 'react-router-dom'\r\nimport produce from 'immer'\r\nconst {Content}=Layout\r\nconst {Panel}=Collapse\r\nexport default function MyVotes(){\r\n  let history=useHistory()\r\n  let [myvotes,setMyvotes]=useState([])\r\n  function deletevote(id,idx){\r\n    axios.delete('/vote/delete/'+id).then(res=>{\r\n      if(res.data.code==0){\r\n        setMyvotes(produce(draft=>{\r\n          draft.splice(idx,1)\r\n        }))\r\n      }\r\n    })\r\n  }\r\n\r\n  function PanelHide(props){\r\n    return(\r\n      <Row justify=\"space-between\">\r\n        <Button icon={<FormOutlined />}>编辑</Button>\r\n        <Button icon={<UnorderedListOutlined />}><Link to={'/vote/'+props.voteid}>查看</Link></Button>\r\n        <Button icon={<ShareAltOutlined />}>分享</Button>\r\n        <Button icon={<DeleteOutlined />} onClick={()=>deletevote(props.voteid,props.idx)}>删除</Button>\r\n      </Row>\r\n    )\r\n  }\r\n  useEffect(()=>{\r\n    const CancelToken=axios.CancelToken\r\n    const Source=CancelToken.source()\r\n    axios.get('/vote/myvotes').then(res=>{\r\n      if(res.data.code==-3){\r\n        alert('请先登录')\r\n        history.push('/')\r\n      }else if(res.data.code==0){\r\n        setMyvotes(res.data.result)\r\n      }\r\n    })\r\n    return ()=>{Source.cancel()}\r\n  },[])\r\n  return(\r\n    <Layout>\r\n      <Content>\r\n        <Row><Col span={8} offset={8}>\r\n          {\r\n          myvotes.length>0\r\n          ?<Collapse accordion>\r\n            {myvotes?.map((it,idx)=><Panel key={idx} header={it.title}><PanelHide voteid={it.id} idx={idx}/></Panel>)}\r\n          </Collapse>\r\n          :'暂无已创建的投票'\r\n          }\r\n        </Col></Row>\r\n      </Content>\r\n    </Layout>\r\n  )\r\n}","import React, { useState } from 'react';\r\nimport { Button, Modal, Form, Input, Typography } from 'antd';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nconst {Text} =Typography\r\n\r\nconst CollectionCreateForm = ({ visible, onCreate, onCancel,setInfo }) => {\r\n  const [form] = Form.useForm();\r\n  let [src,setSrc]=useState('/account/captcha')\r\n  let update=function(){\r\n    setSrc('/account/captcha?date'+Date.now())\r\n  }\r\n  let [alertMess,setAlertMess]=useState()\r\n  async function onOK(){\r\n    form\r\n    .validateFields()\r\n    .then((values) => {\r\n      form.resetFields();\r\n      return axios.post('/account/login',values)\r\n    })\r\n    .then(res=>{\r\n      if(res.data.code==-2){\r\n        setAlertMess(<Text type=\"danger\">验证码错误，请重新输入</Text>)\r\n        update()\r\n      }else if(res.data.code==-1){\r\n        setAlertMess(<Text type=\"danger\">密码错误，请重新输入</Text>)\r\n      }else if(res.data.code==0){\r\n        setAlertMess()\r\n        setInfo({\r\n          isLogin:true,\r\n          loginUser:res.data.result,\r\n        })\r\n        onCreate(res.data);\r\n      }\r\n    })\r\n    .catch((info) => {\r\n      console.log('Validate Failed:', info);\r\n    });\r\n  }\r\n  return (\r\n    <Modal\r\n    visible={visible}\r\n    title=\"请输入登录信息\"\r\n    okText=\"登录\"\r\n    cancelText=\"注册\"\r\n    onCancel={()=>{\r\n      onCancel()\r\n      setAlertMess()\r\n    }}\r\n    onOk={onOK}\r\n    footer={[\r\n      <Button key='cancel' onClick={onCancel}>取消</Button>,\r\n      <Button key='register'><Link to=\"/register\">注册</Link></Button>,\r\n      <Button key='submit' type=\"primary\" onClick={onOK}>登录</Button>,\r\n    ]}\r\n    >\r\n      <Form\r\n        form={form}\r\n        layout=\"vertical\"\r\n        name=\"form_in_modal\"\r\n        initialValues={{\r\n          modifier: 'public',\r\n        }}\r\n        >\r\n        <Form.Item\r\n          name=\"username\"\r\n          label=\"用户名\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: '请输入用户名!',\r\n            },\r\n          ]}\r\n          >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item\r\n        name=\"password\"\r\n        label=\"密码\"\r\n        rules={[\r\n          {\r\n            required:true,\r\n            message:'请输入密码！'\r\n          }\r\n        ]}\r\n        >\r\n          <Input type=\"password\" />\r\n        </Form.Item>\r\n        <Form.Item name=\"captcha\" label=\"验证码\" className=\"collection-create-form_last-form-item\" rules={[{\r\n          required:true,\r\n          message:'请输入验证码！',\r\n        }]}>\r\n          <Input/>\r\n        </Form.Item>\r\n          <img src={src} alt=\"验证码加载失败\" onClick={update}/>\r\n      </Form>\r\n          {alertMess}    \r\n    </Modal>\r\n  );\r\n};\r\n\r\nconst LoginPrompt = (props) => {\r\n  const [visible, setVisible] = useState(false);\r\n  const onCreate = (values) => {\r\n    console.log('Received values of form: ', values);\r\n    setVisible(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        type=\"primary\"\r\n        onClick={() => {\r\n          setVisible(true);\r\n        }}\r\n      >\r\n        登录\r\n      </Button>\r\n      <CollectionCreateForm\r\n        visible={visible}\r\n        onCreate={onCreate}\r\n        onCancel={() => {\r\n          setVisible(false);\r\n        }}\r\n        setInfo={props.setInfo}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPrompt","import { Link,Route,Redirect } from \"react-router-dom\";\r\nimport Create from './Create'\r\nimport MyVotes from './MyVotes'\r\nimport LoginPrompt from './LoginPrompt'\r\nimport { Layout,Row,Col, Button, Space } from \"antd\";\r\nimport { useEffect, useState } from \"react/cjs/react.development\";\r\nimport axios from \"axios\";\r\nconst { Header, Content } = Layout;\r\nexport default function Main(){\r\n  let [info,setInfo]=useState({})\r\n  useEffect(()=>{\r\n    const CancelToken=axios.CancelToken\r\n    const Source=CancelToken.source()\r\n    axios.get('/account/getuser').then(res=>{\r\n      setInfo(res.data.result)\r\n    })\r\n    return ()=>{Source.cancel()}\r\n  },[])\r\n  function logout(){\r\n    axios.get('/account/logout')\r\n    setInfo({})\r\n  }\r\n  return(\r\n    <Layout>\r\n      <Header>\r\n        <Row>\r\n          <Col span={8} style={{color:'rgb(245,245,245)'}}>{info?.loginUser?(<Row><Col span={16}>欢迎，{info?.loginUser}</Col><Col span={8}><Button type=\"primary\" onClick={logout}>登出</Button></Col></Row>):<Space size=\"large\"><LoginPrompt setInfo={setInfo}/><Button type=\"primary\"><Link to=\"/register\">注册</Link></Button></Space>}</Col>\r\n          <Col span={3}>\r\n            <Button type=\"primary\">\r\n              <Link to=\"/main/create\">新建</Link>\r\n            </Button>\r\n          </Col>\r\n          <Col span={3}>\r\n            <Button type=\"primary\">\r\n              <Link to=\"/main/myvotes\">我的</Link>\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n      </Header>\r\n        <Content>\r\n      <Route path=\"/main\" exact>\r\n        <Redirect to=\"/main/create\"/>\r\n      </Route>\r\n      <Route path='/main/create' component={Create}/>\r\n      <Route path='/main/myvotes' component={MyVotes}/>\r\n        </Content>\r\n    </Layout>\r\n  )\r\n}","import axios from \"axios\"\r\nimport { useEffect,useState,useCallback } from \"react\"\r\nimport {useParams,useHistory} from 'react-router-dom'\r\nimport {Row,Col,Typography, Layout, Progress} from 'antd'\r\nimport produce from \"immer\"\r\nimport './ViewVote.css'\r\nconst {Title,Text} =Typography\r\nconst {Content}=Layout\r\nexport default function ViewVote(){\r\n  let {id}=useParams()\r\n  let [vote,setVote]=useState({})\r\n  let history=useHistory()\r\n\r\n  useEffect(()=>{\r\n    //这种异步请求后端数据的方式会导致有一段时间的白屏，另一种做法是借助一个逻辑判断显示一个loading界面，但是感觉会闪一下，不如直接从白屏加载到有内容？\r\n    const CancelToken=axios.CancelToken\r\n    const Source=CancelToken.source()\r\n    axios.get('/vote/view/'+id,{\r\n      cancelToken:Source.token,\r\n    }).then(res=>{\r\n      if(res.data.code==-3){\r\n        alert('请先登录！')\r\n        history.push('/')\r\n      }\r\n      setVote(res.data.result)\r\n    })\r\n    return ()=>{Source.cancel()}\r\n  },[id])\r\n  useEffect(()=>{\r\n    let url=`ws://${window.location.host}/instant/vote/${id}`\r\n    let ws=new WebSocket(url)\r\n    ws.onmessage=function(e){\r\n      setVote(JSON.parse(e.data).result)\r\n    }\r\n    return ()=>ws.close()\r\n  },[id])\r\n  let submit=useCallback(function(e,idx,optionId){\r\n    if(vote.multiple){\r\n      setVote(produce(draft=>{\r\n        draft.options[idx]=e.target.checked\r\n      }))\r\n    }else{\r\n      setVote(produce(draft=>{\r\n        for(let i=0;i<draft.options.length;i++){\r\n          if(i==idx){\r\n            draft.options[idx].isVoted=e.target.checked\r\n          }else{\r\n            draft.options[i].isVoted=false\r\n          }\r\n        }\r\n      }))\r\n    }\r\n    if(e.target.checked){\r\n      axios.post('/vote/view/'+id,{\r\n        optionId,\r\n        action:'add',\r\n      })\r\n    }else{\r\n      axios.post('/vote/view/'+id,{\r\n        optionId,\r\n        action:'cancel',\r\n      })\r\n    }\r\n  },[id])\r\n  return (\r\n    <div className=\"viewvote-layout\"><Layout className=\"viewvote-layout\"><Content><Row><Col span={8} offset={8}>\r\n      <Title level={2}>{vote?.title}</Title>\r\n      <Text>{vote?.extraInfo}{vote?.multiple?<Text type=\"success\">[多选]</Text>:<Text type=\"success\">[单选]</Text>}</Text>\r\n      </Col></Row>\r\n      {vote?.options?.map((it,idx)=>{\r\n        return(\r\n          <Row key={idx}><Col span={8} offset={8} className=\"viewvote-option\">\r\n            <label><Row justify=\"space-between\" className=\"viewvote-label\"><Text strong>{it.content}</Text><input style={{display:'none'}} type=\"checkbox\" checked={it.isVoted} onChange={(e)=>submit(e,idx,it.optionId)}/><Text>{it?.votedBys?.length}票，{it.ratio}%</Text></Row></label>\r\n            <Row><Progress percent={it.ratio} showInfo={false} strokeWidth={2} trailColor={'transparent'} strokeColor=\"#1890ff\"/></Row>\r\n            <Row>{it?.votedBys?.map(it=><span className='viewvote-votedby'> {vote.isAnonymous?'匿':it} </span>)}</Row>  \r\n          </Col></Row>\r\n        )\r\n      })}\r\n    </Content></Layout></div>\r\n  )\r\n}","import React, { useState } from 'react';\r\nimport { Modal, Button } from 'antd';\r\nimport { useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\nexport default function Authentication (props) {\r\n  const history=useHistory()\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const showModal = async () => {\r\n    let res=await axios.post('vote/create-vote',props.info)\r\n    if(res.data.code==-3){\r\n      setIsModalVisible(true);\r\n    }else if(res.data.code<0){\r\n\r\n    }else if(res.data.code=0){\r\n      history.push('/')\r\n    }\r\n  };\r\n  \r\n  const handleOk = () => {\r\n    setIsModalVisible(false);\r\n    history.push('/')\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setIsModalVisible(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button type=\"primary\" onClick={showModal} block=\"true\">\r\n        {props.name}\r\n      </Button>\r\n      <Modal title=\"提示：\" visible={isModalVisible} onOk={handleOk} onCancel={handleCancel} okText=\"确认\" cancelText=\"取消\">\r\n        <p>请先登录...</p>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n","import { useImmer } from \"use-immer\"\r\nimport {useInput,useBooleanChecked} from './hooks'\r\nimport * as moment from 'moment'\r\nimport {useLocation} from 'react-router-dom'\r\nimport { useMemo } from \"react\"\r\nimport { Layout,Row,Col,Typography,Input, Button,Switch } from \"antd\"\r\nimport {PlusOutlined,MinusOutlined} from '@ant-design/icons'\r\nimport './CreateVote.css'\r\nimport Authentication from \"./Authentication\"\r\n\r\nconst {Content}=Layout\r\nconst {Title,Text}=Typography\r\n\r\nexport default function CreateVote(){\r\n  let [options,setOptions]=useImmer(['',''])\r\n  let title=useInput('')\r\n  let extraInfo=useInput('')\r\n  let deadline=useInput(moment().add(1,'M').format(\"YYYY-MM-DD\"))\r\n  let anonymous=useBooleanChecked(false)\r\n  let search=useLocation().search\r\n  let multiple=useMemo(()=>search,[search])\r\n  //更好的做法是表单验证\r\n  let info={\r\n    title:title.value,\r\n    extraInfo:extraInfo.value,\r\n    options:options,\r\n    deadline:deadline.value,\r\n    isAnonymous:anonymous.checked,\r\n    multiple:multiple==\"?multiple=1\"?true:false,\r\n  }\r\n\r\n  function editOption(e,idx){\r\n    setOptions(options=>{\r\n      options[idx]=e.target.value\r\n    })\r\n  }\r\n  function deleteOption(idx){\r\n    if(options.length>2){\r\n      setOptions(options=>{\r\n        options.splice(idx,1)\r\n      })\r\n    }\r\n  }\r\n  function addOption(){\r\n    setOptions(options=>{\r\n      options.push('')\r\n    })\r\n  }\r\n\r\n  return(\r\n    <Layout><Content className=\"create-vote-layout\"><Row><Col span={8} offset={8}>\r\n      <div className='create-vote-layout-in'>\r\n      <Title level={2}>创建{multiple?'多选':'单选'}投票</Title>\r\n      <Input bordered={false} size=\"large\" placeholder=\"投票标题\" {...title}/>\r\n      <Input bordered={false} size=\"middle\" placeholder=\"补充描述(选填)\" {...extraInfo}/>\r\n      {\r\n      options.map((it,idx)=>{\r\n        return <Row key={idx}><Col span={3}><Button type=\"primary\" shape=\"circle\" danger icon={<MinusOutlined style={{fontSize:'18px'}}/>} size=\"small\" onClick={()=>deleteOption(idx)} ></Button></Col><Col span={21}><Input bordered={false} placeholder=\"选项\" value={it} onChange={e=>editOption(e,idx)}/></Col></Row>\r\n      })\r\n      }\r\n      <Row><Col span={3}><Button onClick={addOption} type=\"primary\" shape=\"circle\" icon={<PlusOutlined style={{fontSize:'18px'}}/>} size=\"small\"></Button></Col><Text strong style={{color:'rgb(36,109,240)'}}>添加选项</Text></Row>\r\n      </div>\r\n      <div className=\"create-vote-layout-in\">\r\n      <Row><Col span={4}><Text strong>截止日期</Text></Col><Col span={4} offset={12}><input type=\"date\" {...deadline} className=\"vote-date\"/></Col></Row>\r\n      <Row><Col span={4}><Text strong>匿名投票</Text></Col><Col span={4} offset={16}><Switch {...anonymous}/></Col></Row>\r\n      </div>\r\n      <Row><Authentication name=\"提交投票\" info={info}/></Row>\r\n    </Col></Row></Content></Layout>\r\n  )\r\n}","import React from 'react';\r\nimport { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport {\r\n  Form,\r\n  Input,\r\n  Row,\r\n  Col,\r\n  Checkbox,\r\n  Button,\r\n  Typography,\r\n} from 'antd';\r\nimport axios from 'axios';\r\nconst {Text}=Typography\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 8,\r\n    },\r\n  },\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n    },\r\n    sm: {\r\n      span: 16,\r\n    },\r\n  },\r\n};\r\nconst tailFormItemLayout = {\r\n  wrapperCol: {\r\n    xs: {\r\n      span: 24,\r\n      offset: 0,\r\n    },\r\n    sm: {\r\n      span: 16,\r\n      offset: 8,\r\n    },\r\n  },\r\n};\r\n\r\nconst AntdRegister = () => {\r\n  const [form] = Form.useForm();\r\n  const history=useHistory()\r\n  let  [mess,setMess]=useState('')\r\n  const onFinish = async (values) => {\r\n    console.log('Received values of form: ', values);\r\n    let {agreement,confirm,...info}=values\r\n    try{\r\n      let res=await axios.post('/account/register',info)\r\n      if(res.data.code==-2){\r\n        setMess('该用户已经存在！')\r\n      }else if(res.data.code==-1){\r\n        setMess(res.data.message)\r\n        throw new Error(res.data.message)\r\n      }else if(res.data.code==0){\r\n        setMess()\r\n        history.push('/')\r\n      }\r\n    }catch(e){\r\n      console.log(e)\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <Row><Col span={12} offset={4}>\r\n    <Form\r\n      {...formItemLayout}\r\n      form={form}\r\n      name=\"register\"\r\n      onFinish={onFinish}\r\n      scrollToFirstError\r\n    >\r\n          <Form.Item\r\n            name=\"username\"\r\n            label=\"用户名\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: '请输入用户名！',\r\n                whitespace: true,\r\n              },\r\n            ]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n\r\n      <Form.Item\r\n        name=\"password\"\r\n        label=\"Password\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '请设置密码',\r\n          },\r\n        ]}\r\n        hasFeedback\r\n      >\r\n        <Input.Password />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        name=\"confirm\"\r\n        label=\"Confirm Password\"\r\n        dependencies={['password']}\r\n        hasFeedback\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '请确认密码',\r\n          },\r\n          ({ getFieldValue }) => ({\r\n            validator(_, value) {\r\n              if (!value || getFieldValue('password') === value) {\r\n                return Promise.resolve();\r\n              }\r\n\r\n              return Promise.reject(new Error('两次输入的密码不匹配!'));\r\n            },\r\n          }),\r\n        ]}\r\n      >\r\n        <Input.Password />\r\n      </Form.Item>\r\n\r\n          <Form.Item\r\n            name=\"email\"\r\n            label=\"E-mail\"\r\n            rules={[\r\n              {\r\n                type: 'email',\r\n                message: '请输入合法的邮箱地址',\r\n              },\r\n              {\r\n                required: true,\r\n                message: '请输入邮箱！',\r\n              },\r\n            ]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n\r\n      <Form.Item\r\n        name=\"agreement\"\r\n        valuePropName=\"checked\"\r\n        rules={[\r\n          {\r\n            validator: (_, value) =>\r\n              value ? Promise.resolve() : Promise.reject(new Error('请勾选同意')),\r\n          },\r\n        ]}\r\n        {...tailFormItemLayout}\r\n      >\r\n        <Checkbox>\r\n          我同意 <a href=\"/\">注册条款</a>\r\n        </Checkbox>\r\n      </Form.Item>\r\n      <Form.Item {...tailFormItemLayout}>\r\n        <Button type=\"primary\" htmlType=\"submit\" block=\"true\">\r\n          注册\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n    <Text type=\"danger\">{mess}</Text>\r\n    </Col></Row>\r\n  );\r\n};\r\n\r\nexport default AntdRegister","import './App.css';\nimport {Switch,Route,HashRouter,Redirect} from 'react-router-dom'\nimport Login from './Login'\nimport Main from './Main'\nimport ViewVote from './ViewVote'\nimport CreateVote from './CreateVote'\nimport AntdRegister from './AntdRegister'\nimport 'antd/dist/antd.css';\nfunction App() {\n  return (\n    <HashRouter>\n      <div className=\"App\">\n        <Switch>\n          <Route path='/' exact>\n            <Redirect to=\"/main\"/>\n          </Route>\n          <Route path='/login' component={Login} />\n          <Route path='/register' component={AntdRegister} />\n          <Route path='/main' component={Main} />\n          <Route path='/vote/:id' component={ViewVote} />\n          <Route path='/create' component={CreateVote} />\n        </Switch>\n      </div>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}